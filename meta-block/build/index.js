!function(){"use strict";var e={n:function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,{a:o}),o},d:function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,o=window.wp.i18n,r=window.wp.data,n=window.wp.plugins,s=window.wp.editPost,a=window.React,l=e.n(a),p=window.wp.apiFetch,c=e.n(p),d=window.wp.components;const i=e=>{let{copyText:r}=e;const[n,s]=(0,t.useState)(!1);return(0,t.createElement)(d.ClipboardButton,{text:r,isTertiary:!0,onCopy:()=>s(!0),onFinishCopy:()=>s(!1)},n?(0,o.__)("Copied!","post-password-token"):(0,o.__)("Copy","post-passord-token"))};var w=e=>{let{children:r,url:n}=e;const[s,a]=(0,t.useState)(!0),p=s?(0,o.__)("Show","post-password-token")+" ↓":(0,o.__)("Hide","post-password-token")+" ↑";return(0,t.createElement)(l().Fragment,null,(0,t.createElement)("b",null,r),": ",(0,t.createElement)(i,{copyText:n}),(0,t.createElement)(d.Button,{isTertiary:!0,onClick:()=>{a(!s)}},p),(0,t.createElement)("span",{className:s?"hidden":""},n))},u=e=>{const[r,n]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async e=>{const t=new URL(`${window.location.origin}/wp-json/post-password-token/v1/post/${e}/tokens`);return c()({url:t.toString()}).catch((e=>e&&e.hasOwnProperty("error")&&e.hasOwnProperty("message")?(console.error(`Could not load post password tokens. Server response: ${e.message}`),e):(console.error("Unknown error has occurred:"),console.error(e),{error:500,message:(0,o.__)("An unknown error occurred while fetching password tokens","post-password-token")})))})(e.post.id).then((e=>{(e.hasOwnProperty("shortUrl")||e.hasOwnProperty("error"))&&n(e)}))}),[e.post]);const s=null!==r,a=null!==r&&r.hasOwnProperty("error");return(0,t.createElement)(l().Fragment,null,s&&a&&(0,t.createElement)(d.Notice,{status:"error",isDismissible:!1},(0,o.__)("Post Password Token Error:","post-password-token")," ",r.message),s&&!a&&(0,t.createElement)("div",null,(0,t.createElement)("p",null,(0,o.__)("Copy and share this secret Password Token URL to allow readers to see the content of this post","post-password-token")),(0,t.createElement)("p",null,(0,t.createElement)(w,{url:r.shortUrl},(0,o.__)("Short Url","post-password-token")),(0,t.createElement)("br",null),(0,t.createElement)(w,{url:r.prettyUrl},(0,o.__)("Permalink","post-password-token")))))};const m=()=>(0,t.createElement)("p",null,(0,o.__)("This post is not protected by a password.","post-password-token")),h=()=>(0,t.createElement)("p",null,(0,o.__)("Tokens are only generated for Published and Password Protected posts.","post-password-token"));(0,n.registerPlugin)("post-password-token",{render:()=>{var e;const n=(0,r.select)("core/editor").getCurrentPost(),a=(null===(e=n.password)||void 0===e?void 0:e.length)>0,l=["publish","future"].includes(n.status);return(0,t.createElement)(s.PluginDocumentSettingPanel,{name:"post-password-token",title:(0,o.__)("Post Password Token","post-password-token"),className:"post-password-token-panel"},!l&&(0,t.createElement)(h,null),!a&&(0,t.createElement)(m,null),l&&a&&(0,t.createElement)(u,{post:n}))}})}();